<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portfolio - Spazio Sperimentale</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; cursor: none !important; }
    
    body {
      font-family: 'Courier New', Courier, monospace;
      background: #000;
      color: #fff;
      height: 100vh;
      width: 100vw;
      overflow: hidden;
    }

    /* --- PRIMA PAGINA --- */
    #loading-page {
      background: #000;
      overflow: hidden;
      display: block; 
      padding: 10px;
    }

    #glitch-bg-container {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0; left: 0;
      font-size: 14px;
      line-height: 1.4;
      color: rgb(255, 255, 255);
      pointer-events: none;
      user-select: none;
      padding: 10px;
      overflow: hidden;
    }

    /* Importante per la repulsione */
    .repel-word, .letter {
      display: inline-block;
      will-change: transform;
      transition: transform 0.2s ease-out;
    }

    /* --- SECONDA PAGINA --- */
    #intro-page {
      align-items: flex-start;
      text-align: left;
    }

    #intro-page .interactive-container {
      max-width: 500px;
    }

    .letter-desc {
      font-size: clamp(16px, 4vw, 20px);
      line-height: 1.1;
      text-transform: lowercase;
    }

    /* --- STILI COMUNI E NAVIGAZIONE --- */
    .link-ex { color: #fff; text-decoration: underline; pointer-events: auto; transition: opacity 0.2s; }
    .link-ex:hover { opacity: 0.7; }

    .cursor {
      position: fixed;
      width: 20px; height: 20px;
      border: 1px solid #fff;
      border-radius: 50%;
      pointer-events: none;
      transform: translate(-50%, -50%);
      z-index: 9999;
      mix-blend-mode: difference;
    }

    section {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1);
      background: #000;
      padding: 0 8vw;
      will-change: transform;
    }

    .section-up { transform: translateY(-100%); }
    .section-down { transform: translateY(100%); }

    #main-page { justify-content: flex-start; padding-top: 35vh; padding-left: 0; padding-right: 0; }
    
    .exercises-container { display: flex; justify-content: space-around; width: 100%; padding: 0 5vw; }
    .exercise { display: flex; flex-direction: column; font-size: clamp(16px, 1.4vw, 24px); pointer-events: auto; text-align: left; }
    .ex-title { display: flex; align-items: center; gap: 10px; transition: 0.2s; }
    .exercise:hover .ex-title { transform: translateX(5px); }
    .description-text { padding-left: 32px; font-size: clamp(11px, 0.8vw, 14px); opacity: 0; transition: 0.3s; max-width: 250px; }
    .exercise:hover .description-text { opacity: 1; }
    .arrow { width: 20px; display: inline-block; }

    .footer {
      position: absolute;
      bottom: 5vh; left: 0;
      width: 100%;
      padding: 0 8vw;
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      align-items: center;
      pointer-events: none;
      z-index: 100;
    }
    .footer > * { pointer-events: auto; }
    #clock { justify-self: center; letter-spacing: 2px; }
    .instagram-link { justify-self: end; color: #fff; }
    .instagram-icon { width: 24px; fill: currentColor; }
  </style>
</head>
<body>

  <div class="cursor"></div>

  <section id="loading-page">
    <div id="glitch-bg-container"></div>
  </section>

  <section id="intro-page" class="section-down">
    <div class="interactive-container" id="desc-target"></div>
  </section>

  <section id="main-page" class="section-down">
    <div class="exercises-container">
      <div class="exercise">
        <div class="ex-title"><span class="arrow">→</span>Esercizio 1</div>
        <div class="description-text"><a href="Esercizio_1/index.html" class="link-ex">Mirtillo</a></div>
      </div>
      <div class="exercise">
        <div class="ex-title"><span class="arrow">→</span>Esercizio 2</div>
        <div class="description-text"><a href="Esercizio_2/index.html" class="link-ex">Animazione "a"</a></div>
      </div>
      <div class="exercise">
        <div class="ex-title"><span class="arrow">→</span>Esercizio 3</div>
        <div class="description-text"><a href="Esercizio_3/index.html" class="link-ex">Monitoraggio ore utilizzo computer</a></div>
      </div>
    </div>

    <div class="footer">
      <div class="name">Alissa Bionda</div>
      <div id="clock">00:00:00</div>
      <a href="https://www.instagram.com" target="_blank" class="instagram-link">
        <svg class="instagram-icon" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
      </a>
    </div>
  </section>

  <script>
    // --- VARIABILI GLOBALI ---
    let mouse = { x: -1000, y: -1000 };
    let currentSection = 0;
    const repulsionRadius = 100;
    const repulsionStrength = 0.5;

    // --- SFONDO PRIMA PAGINA (PATTERN) ---
    const bgContainer = document.getElementById('glitch-bg-container');
    const wordText = "SPAZIO SPERIMENTALE ";
    
    function initPattern() {
        bgContainer.innerHTML = '';
        // Riempio lo schermo con span separati
        const amount = Math.floor((window.innerWidth * window.innerHeight) / 1200);
        for (let i = 0; i < amount; i++) {
            const span = document.createElement('span');
            span.textContent = wordText;
            span.className = 'repel-word';
            bgContainer.appendChild(span);
        }
    }
    initPattern();

    // --- CURSORE E OROLOGIO ---
    const cursor = document.querySelector('.cursor');
    document.addEventListener('mousemove', e => {
      mouse.x = e.clientX; 
      mouse.y = e.clientY;
      cursor.style.left = mouse.x + 'px';
      cursor.style.top = mouse.y + 'px';
    });

    setInterval(() => {
      document.getElementById('clock').textContent = new Date().toLocaleTimeString('it-IT', {hour12: false});
    }, 1000);

    // --- TESTO SECONDA PAGINA ---
    function createInteractiveText(targetId, text, className) {
      const container = document.getElementById(targetId);
      text.split("").forEach(char => {
        const span = document.createElement('span');
        span.textContent = char === " " ? "\u00A0" : char;
        span.className = `letter ${className}`;
        container.appendChild(span);
      });
    }
    createInteractiveText('desc-target', 'piccola raccolta di lavori sperimentali', 'letter-desc');

    // --- LOGICA REPULSIONE ---
    function handleRepulsion() {
        // Seleziono gli elementi in base alla sezione attiva
        let targets = [];
        if (currentSection === 0) {
            targets = document.querySelectorAll('.repel-word');
        } else if (currentSection === 1) {
            targets = document.querySelectorAll('.letter-desc');
        }

        targets.forEach(el => {
            const rect = el.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            const dx = mouse.x - centerX;
            const dy = mouse.y - centerY;
            const distance = Math.sqrt(dx * dx + dy * dy);

            if (distance < repulsionRadius) {
                const angle = Math.atan2(dy, dx);
                const force = (repulsionRadius - distance) * repulsionStrength;
                el.style.transform = `translate(${-Math.cos(angle) * force}px, ${-Math.sin(angle) * force}px)`;
            } else {
                el.style.transform = 'translate(0, 0)';
            }
        });
        requestAnimationFrame(handleRepulsion);
    }
    handleRepulsion();

    // --- NAVIGAZIONE ---
    const sections = document.querySelectorAll('section');
    let isTransitioning = false;

    function goToSection(index) {
      if (index < 0 || index >= sections.length || isTransitioning) return;
      isTransitioning = true;
      currentSection = index;
      sections.forEach((sec, i) => {
        sec.classList.remove('section-up', 'section-down');
        if (i < currentSection) sec.classList.add('section-up');
        else if (i > currentSection) sec.classList.add('section-down');
      });
      setTimeout(() => { isTransitioning = false; }, 850);
    }

    window.addEventListener('wheel', (e) => {
      if (Math.abs(e.deltaY) > 10) { 
        if (e.deltaY > 0) goToSection(currentSection + 1);
        else goToSection(currentSection - 1);
      }
    }, { passive: true });

    document.querySelectorAll('.exercise').forEach(ex => {
      const a = ex.querySelector('.arrow');
      ex.addEventListener('mouseenter', () => a.textContent = '↗');
      ex.addEventListener('mouseleave', () => a.textContent = '→');
    });

    window.addEventListener('resize', initPattern);
  </script>
</body>
</html>